[build]
builder = "NIXPACKS"
watchPatterns = ["src/**"]

[deploy]
startCommand = "npm run preview -- --host 0.0.0.0 --port $PORT"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[environments.production]
VITE_API_BASE_URL = "${{BACKEND_URL}}"
VITE_APP_NAME = "Eternalgy ERP"
VITE_APP_VERSION = "1.0.0"
VITE_BUILD_TIMESTAMP = "${{RAILWAY_GIT_COMMIT_SHA}}"
VITE_BUILD_COMMIT = "${{RAILWAY_GIT_COMMIT_SHA}}"
VITE_BUILD_BRANCH = "${{RAILWAY_GIT_BRANCH}}"

[environments.development]
VITE_API_BASE_URL = "http://localhost:3001"
VITE_APP_NAME = "Eternalgy ERP (Dev)"
VITE_APP_VERSION = "1.0.0-dev"
VITE_BUILD_TIMESTAMP = "development"
VITE_BUILD_COMMIT = "development"
VITE_BUILD_BRANCH = "development"